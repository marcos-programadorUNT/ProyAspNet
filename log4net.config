<?xml version="1.0" encoding="utf-8" ?>
<log4net>
  <appender name="AzureBlobAppender"
            type="log4net.Azure.Storage.AzureBlobAppender, log4net.Azure.Storage">
    <!-- BufferSize=0 para escribir línea a línea; súbelo si quieres mejorar throughput -->
    <BufferSize value="0" />
    <!-- Contenedor y “subcarpeta” opcional -->
    <ContainerName value="logs" />
    <DirectoryName value="api-v1" />
    <!-- Rotación diaria -->
    <FileName type="log4net.Util.PatternString" value="app-{yyyyMMdd}.log" />
    <!-- Toma el connection string desde variable de entorno -->
    <ConnectionString value="DefaultEndpointsProtocol=https;AccountName=storagesbperu;AccountKey=1ZKYxpzcfgOhiusDtVbni3Cd8TkYSe5K+gYsiLQK0efkxiaVxtqHtaAkSNZ27xyr2gfpGaDSW31++AStIbchpw==;EndpointSuffix=core.windows.net" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date %-5level %logger - %message%newline%exception" />
    </layout>
  </appender>

  <!-- Opcional: también escribir a consola para Log Stream -->
  <appender name="Console" type="log4net.Appender.ConsoleAppender">
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date %-5level %logger - %message%newline%exception" />
    </layout>
  </appender>

  <root>
    <level value="INFO" />
    <appender-ref ref="AzureBlobAppender" />
    <appender-ref ref="Console" />
  </root>
</log4net>
